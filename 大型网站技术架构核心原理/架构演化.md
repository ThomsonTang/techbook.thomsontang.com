
## 术语卡： 大型网站系统的特点
- 术语：网站系统的特点
- 印象：
	- 高并发，大流量
	- 高可用
	- 海量数据
	- 用户分布广泛，网络情况复杂
	- 安全环境恶劣
	- 需求快速变更，发布频繁
	- 渐进式发展
- 例子：
	- Google日均PV数35亿，日均IP访问数3亿
	- 系统24小时不间断服务
	- Google有近百万台服务器为全球用户提供服务
	- 互联网的开发性使得容易遭受黑客的攻击
	- 互联网产品快速迭代，发布频率极高
	- 大型互联网一般都是从一个小网站逐渐发展成大规模的网站

## 任意卡：大型网站架构演化历程
- 单服务器：应用程序、文件、数据库都部署在同一台机器上。随着用户增加，单个服务器的性能和存储空间都会成为网站的瓶颈。
![][image-1]
- 应用服务和数据服务分离：应用程序、文件、数据库分别部署在不同的服务器上，称之为应用服务器、文件服务器、数据库服务器。这种架构下，随着业务的增长，**数据库访问压力太大导致访问延迟**，成为新的瓶颈。
![][image-2]
- 使用缓存改善网站性能：根据二八原则，通过增加**本地缓存**或**分布式的远程缓存**提高网站的数据访问速度。但随之而来的又是**单个应用服务器的性能有限**，网站访问高峰期，又会成为系统新的瓶颈。
![][image-3]
- 使用应用服务器集群改善网站的并发处理能力：通过负载均衡调度服务器，将用户的请求分发给集群中不同的应用服务器处理，从而改善系统性能，实现系统的**可伸缩性**。
![][image-4]
- 数据库读写分离：缓存可以使大部分读请求不必通过数据库，但仍有部分读请求和全部的写请求会访问数据库，达到一定的规模后，这同样会成为网站的瓶颈。于是利用数据库提供的**主从热备**功能，对写操作和读操作做不同的处理。应用程序在写数据的时候，访问主数据库，主数据库根据主从复制机制将数据同步到从数据库，这样应用程序读数据的时候，就可以直接访问从数据库。
![][image-5]
- 使用反向代理和CDN加速网站响应：这两种方式的基本原理都是**基于缓存机制**实现的，其目标是**尽早的将数据返回给用户**。区别在于，CDN是部署在网络提供商的机房，用户可以从距离自己最近的提供商那里获取数据；而反向代理则是部署在网站的中心机房，用户请求到达后，会先查看反向代理服务器是否缓存该数据。这两种方式，一方面**加快了用户访问速度**，另一方面**减轻了后端应用服务器的压力**。
![][image-6]
- 使用分布式文件系统和分布式数据库系统：即使对数据库做了读写分离以后，随着业务和用户的继续增加，把一台服务器分成两台的做法依旧无法满足需求，此时就应该考虑使用**分布式系统**。但需要注意的是，**使用分布式数据库是网站数据库拆分的最后手段，只有当单表的数据规模非常庞大的时候才使用。否则更常用的做法是根据业务的不用，将不同业务的数据库部署在不同的物理机上**。
![][image-7]
- 使用NoSQL和搜索引擎：随着网站业务越来越复杂，网站需要采用一些非关系数据库技术如NoSQL和非数据库查询如搜索引擎。**NoSQL和搜索引擎都是源自互联网的技术手段，对可伸缩性的分布式特性具有更好的支持。应用服务器则通过一个统一数据访问模块访问各种数据，减轻应用程序管理诸多数据源的麻烦**。
![][image-8]
- 业务拆分：根据业务或产品线，将一个网站拆分成许多不同的应用，每个应用独立部署维护。应用之间可以通过一个超链接建立关系，也可以通过消息队列进行数据分发，当然最多的还是通过访问同一个数据存储系统来构成一个关联的完整系统。
![][image-9]
- 分布式服务：将共用的业务提取出来，独立部署，比如用户管理、商品管理等。由这些可复用的业务连接数据库，提供共用业务服务，而应用系统只需要管理用户界面，通过分布式服务调用共用业务服务完成具体业务操作。
![][image-10]

[image-1]:	https://user-images.githubusercontent.com/980216/27870721-38821f6e-61d6-11e7-9e19-909cc397b7b1.png
[image-2]:	https://user-images.githubusercontent.com/980216/27872352-1d0e87a4-61db-11e7-8421-313cd0ac06b4.png
[image-3]:	https://user-images.githubusercontent.com/980216/27872406-4f49c99a-61db-11e7-8cd5-9f4ca2e72877.png
[image-4]:	https://user-images.githubusercontent.com/980216/27872468-77028378-61db-11e7-86d2-490bd6dff746.png
[image-5]:	https://user-images.githubusercontent.com/980216/27872492-8bd6379a-61db-11e7-9d51-1b434af3fed7.png
[image-6]:	https://user-images.githubusercontent.com/980216/27872521-a3dabd0c-61db-11e7-95c7-6b3aa0142cd8.png
[image-7]:	https://user-images.githubusercontent.com/980216/27872547-b9b6f65e-61db-11e7-9822-2df77413ce00.png
[image-8]:	https://user-images.githubusercontent.com/980216/27872614-e23db04a-61db-11e7-8cd7-b318333af884.png
[image-9]:	https://user-images.githubusercontent.com/980216/27872618-ecdcd3fa-61db-11e7-8135-efe5adee8fb2.png
[image-10]:	https://user-images.githubusercontent.com/980216/27872661-0e74d63e-61dc-11e7-86ee-c64687da8626.png